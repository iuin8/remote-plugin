# Remote plugin configuration template
# Generated by Gradle Remote Plugin

# Base configuration (can be extended by environments)
common:
  base:
    jenkins:
      url: "https://your-jenkins-url.com"
      user: "your_username"
      token: "your_api_token"
    remote:
      base_dir: /path/to/your/app
    env:
      JAVA_TOOL_OPTIONS: -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:3${SERVICE_PORT}
    start:
      command: sudo systemctl restart $SERVICE_NAME
    log:
      filePattern: ${REMOTE_BASE_DIR}/../logs/${service}.log
    ssh:
      user: www
      setup:
        auto:
          keygen: false
    service_ports:
      app: 8080

# Environment configurations
# Each environment can have its own settings
environments:
  # Development environment configuration
  dev:
    extends: base
    ssh:
      server: dev-server
    jenkins:
      job: "dev-job"

  # Test environment configuration
  test:
    extends: base
    ssh:
      server: test-server
    jenkins:
      job: "test-job"

  # UAT environment configuration
  UAT:
    extends: base
    ssh:
      server: uat-server
    jenkins:
      job: "uat-job"

  # prod environment configuration
  prod:
    extends: base
    ssh:
      server: prod-server
    jenkins:
      job: "prod-job"
    start:
      # 是否需要用户确认(用于生产等环境, 防止误操作执行了发布等任务)
      need_confirm: true

# Supported placeholders:
#   - ${service}            : current Gradle project name
#   - ${REMOTE_BASE_DIR}    : value of remote.base_dir
#   - ${remote.base.dir}    : same as above
#   - ${SERVICE_NAME}       : same as ${service}
#   - ${SERVICE_PORT}       : service port